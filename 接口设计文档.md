# ğŸ“ é—²ç½®ç‰©å“æ…§é€‰å¹³å° - API æ¥å£æ–‡æ¡£

**åŸºæœ¬è§„èŒƒ**
* **Base URL**: `/api`
* **Content-Type**: `application/json`
* **è®¤è¯**: HTTP Header `Authorization: Bearer <token>`
* **ç»Ÿä¸€è¿”å›æ ¼å¼**:
    ```json
    {
      "code": 200,      // 200æˆåŠŸï¼Œå…¶ä»–å¤±è´¥
      "message": "æ“ä½œæˆåŠŸ",
      "data": { ... }
    }
    ```

## 1. é€šç”¨æ¨¡å— (Common)

| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•° |
| :--- | :--- | :--- | :--- | :--- |
| **æ–‡ä»¶ä¸Šä¼ ** | `/common/upload` | POST | ä¸Šä¼ å›¾ç‰‡åˆ° OSS | `file`: MultipartFile |

---

## 2. ç”¨æˆ·æ¨¡å— (User)

### 2.1 è®¤è¯ä¸è´¦å·
| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•°ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **ç”¨æˆ·æ³¨å†Œ** | `/auth/register` | POST | æ³¨å†Œæ–°è´¦å· | `{ "username": "", "password": "", "nickname": "" }` |
| **ç”¨æˆ·ç™»å½•** | `/auth/login` | POST | è·å– Token | `{ "username": "", "password": "" }` |
| **é€€å‡ºç™»å½•** | `/auth/logout` | POST | é”€æ¯ Token | æ—  |

### 2.2 ä¸ªäººä¿¡æ¯
| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•°ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **è·å–ä¿¡æ¯** | `/user/info` | GET | è·å–å½“å‰ç”¨æˆ·èµ„æ–™ | æ—  |
| **ä¿®æ”¹èµ„æ–™** | `/user/info` | PUT | ä¿®æ”¹å¤´åƒæ˜µç§° | `{ "nickname": "æ–°æ˜µç§°", "avatar": "http://..." }` |
| **ä¿®æ”¹å¯†ç ** | `/user/password` | PUT | ä¿®æ”¹ç™»å½•å¯†ç  | `{ "oldPassword": "", "newPassword": "" }` |
| **å–å®¶ä¿¡æ¯** | `/user/seller/{id}` | GET | æŸ¥çœ‹å–å®¶å…¬å¼€ä¿¡æ¯ | è·¯å¾„å‚æ•° `id` |

### 2.3 æ”¶è´§åœ°å€ç®¡ç†
| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•°ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **åœ°å€åˆ—è¡¨** | `/address/list` | GET | è·å–æˆ‘çš„æ‰€æœ‰åœ°å€ | æ—  |
| **æ–°å¢åœ°å€** | `/address` | POST | æ·»åŠ æ–°åœ°å€ | `{ "name": "å¼ ä¸‰", "phone": "138...", "province": "åŒ—äº¬", "detail": "...", "isDefault": 1 }` |
| **ä¿®æ”¹åœ°å€** | `/address` | PUT | ä¿®æ”¹åœ°å€ä¿¡æ¯ | `{ "id": 1, "name": "å¼ ä¸‰", ... }` |
| **åˆ é™¤åœ°å€** | `/address/{id}` | DELETE | åˆ é™¤æŒ‡å®šåœ°å€ | è·¯å¾„å‚æ•° `id` |

---

## 3. å•†å“æ¨¡å— (Product)

### 3.1 å–å®¶ç®¡ç†
| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•°ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **å‘å¸ƒå•†å“** | `/product/publish` | POST | å‘å¸ƒé—²ç½® | `{ "title": "", "price": 100, "categoryId": 1, "images": [], "conditionLevel": 1 }` |
| **ç¼–è¾‘å•†å“** | `/product` | PUT | ä¿®æ”¹å•†å“è¯¦æƒ… | `{ "id": 1, "title": "æ–°æ ‡é¢˜", ... }` |
| **ä¿®æ”¹çŠ¶æ€** | `/product/status` | PUT | ä¸Šæ¶/ä¸‹æ¶æ“ä½œ | `{ "id": 1, "status": 2 }` (2ä¸Šæ¶ 5ä¸‹æ¶) |
| **åˆ é™¤å•†å“** | `/product/{id}` | DELETE | é€»è¾‘åˆ é™¤ | è·¯å¾„å‚æ•° `id` |
| **æˆ‘çš„å‘å¸ƒ** | `/product/my` | GET | æŸ¥è¯¢æˆ‘å‘å¸ƒçš„å•†å“ | `page=1&size=10&status=1` |

### 3.2 ä¹°å®¶æµè§ˆ
| æ¥å£åç§° | URL | Method | æè¿° | Query å‚æ•°è¯´æ˜ |
| :--- | :--- | :--- | :--- | :--- |
| **å•†å“æœç´¢** | `/product/list` | GET | æ ¸å¿ƒæœç´¢æ¥å£ | `keyword` (å…³é”®è¯)<br>`categoryId` (åˆ†ç±»ID)<br>`minPrice` / `maxPrice` (ä»·æ ¼åŒºé—´)<br>`condition` (æˆè‰²)<br>`sort` (æ’åº: price_asc/time_desc) |
| **å•†å“è¯¦æƒ…** | `/product/{id}` | GET | è·å–å•†å“è¯¦æƒ… | åŒ…å«å–å®¶ä¿¡æ¯ã€æ˜¯å¦æ”¶è—ã€æµè§ˆé‡ |
| **åˆ†ç±»æ ‘** | `/category/tree` | GET | è·å–åˆ†ç±»å¯¼èˆªæ ‘ | æ—  |

---

## 4. è®¢å•æ¨¡å— (Order)

**è®¢å•çŠ¶æ€å®šä¹‰**: `1:å¾…æ”¯ä»˜` `2:å¾…å‘è´§` `3:å·²å‘è´§` `4:å·²å®Œæˆ` `5:å·²å–æ¶ˆ`

### 4.1 äº¤æ˜“æµç¨‹
| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•°ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **åˆ›å»ºè®¢å•** | `/order/create` | POST | ä¸‹å•(é”åº“å­˜) | `{ "productId": 1, "quantity": 1, "addressId": 5 }`<br>*(è´­ç‰©è½¦ç»“ç®—æ—¶ä¼  cartIds)* |
| **æ”¯ä»˜è®¢å•** | `/order/pay` | POST | æ¨¡æ‹Ÿæ”¯ä»˜å›è°ƒ | `{ "orderNo": "DD2023...", "payType": "alipay" }` |
| **å–å®¶å‘è´§** | `/order/deliver` | POST | å–å®¶å¡«å†™ç‰©æµ | `{ "orderNo": "DD2023...", "trackingNo": "SF123456" }` |
| **ç¡®è®¤æ”¶è´§** | `/order/receive` | POST | ä¹°å®¶ç¡®è®¤æ”¶è´§ | `{ "orderNo": "DD2023..." }` |
| **å–æ¶ˆè®¢å•** | `/order/cancel` | POST | å–æ¶ˆæœªæ”¯ä»˜è®¢å• | `{ "orderNo": "DD2023..." }` |

### 4.2 è®¢å•æŸ¥è¯¢
| æ¥å£åç§° | URL | Method | æè¿° | Query å‚æ•° |
| :--- | :--- | :--- | :--- | :--- |
| **è®¢å•è¯¦æƒ…** | `/order/detail/{orderNo}` | GET | æŸ¥çœ‹è®¢å•è¯¦æƒ… | æ—  |
| **ä¹°å®¶è®¢å•** | `/order/buyer/list` | GET | æˆ‘ä¹°åˆ°çš„ | `status`, `page`, `size` |
| **å–å®¶è®¢å•** | `/order/seller/list` | GET | æˆ‘å–å‡ºçš„ | `status`, `page`, `size` |

---

## 5. è´­ç‰©è½¦ä¸æ”¶è— (Cart & Favorite)

| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•°ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **åŠ å…¥è´­ç‰©è½¦** | `/cart/add` | POST | æ·»åŠ å•†å“ | `{ "productId": 1, "quantity": 1 }` |
| **è´­ç‰©è½¦åˆ—è¡¨** | `/cart/list` | GET | æŸ¥çœ‹è´­ç‰©è½¦ | æ—  |
| **æ›´æ–°æ•°é‡** | `/cart/update` | PUT | ä¿®æ”¹è´­ä¹°æ•°é‡ | `{ "id": 1, "quantity": 2 }` |
| **åˆ é™¤è´­ç‰©é¡¹** | `/cart/delete` | DELETE | ç§»é™¤å•†å“ | `{ "ids": [1, 2] }` |
| **åˆ‡æ¢æ”¶è—** | `/favorite/toggle` | POST | æ”¶è—/å–æ¶ˆæ”¶è— | `{ "productId": 1 }` |
| **æ”¶è—åˆ—è¡¨** | `/favorite/list` | GET | æˆ‘çš„æ”¶è— | `page=1&size=10` |

---

## 6. è¯„ä»·ä¸å›¾åƒè¯†åˆ« (Review & AI)

| æ¥å£åç§° | URL | Method | æè¿° | è¯·æ±‚å‚æ•°ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- | :--- |
| **å‘è¡¨è¯„ä»·** | `/comment/publish` | POST | è¯„ä»·è®¢å• | `{ "orderId": 1, "score": 5, "content": "å¥½è¯„" }` |
| **å•†å“è¯„ä»·** | `/comment/list/{productId}` | GET | æŸ¥çœ‹æŸå•†å“è¯„ä»· | `page=1&size=10` |
| **å›¾åƒè¯†åˆ«** | `/image/recognize` | POST | AIè¯†åˆ«å•†å“ä¿¡æ¯ | `file`: MultipartFile (è¿”å›åˆ†ç±»ã€æ ‡é¢˜å»ºè®®) |

---

## 7. ç®¡ç†å‘˜æ¨¡å— (Admin)

| æ¥å£åç§° | URL | Method | æè¿° | Query å‚æ•° |
| :--- | :--- | :--- | :--- | :--- |
| **ç”¨æˆ·åˆ—è¡¨** | `/admin/user/list` | GET | ç®¡ç†ç”¨æˆ· | `keyword`, `page`, `size` |
| **ç”¨æˆ·çŠ¶æ€** | `/admin/user/status` | PUT | å°ç¦/è§£å° | `{ "userId": 1, "status": 0 }` |
| **å•†å“å®¡æ ¸** | `/admin/product/audit` | PUT | å®¡æ ¸å•†å“ | `{ "productId": 1, "pass": true, "reason": "" }` |
| **å¹³å°ç»Ÿè®¡** | `/admin/stats` | GET | ä»ªè¡¨ç›˜æ•°æ® | æ—  |