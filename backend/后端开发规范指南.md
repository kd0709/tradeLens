# åç«¯å¼€å‘è§„èŒƒæŒ‡å—

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-01-20  
**é€‚ç”¨èŒƒå›´**: åç«¯æœåŠ¡(Spring Boot)ã€å‰ç«¯è°ƒç”¨æ–¹ã€æµ‹è¯•äººå‘˜

---

## ğŸ“‹ ç›®å½•

1. [å¼‚å¸¸å¤„ç†è§„èŒƒ](#å¼‚å¸¸å¤„ç†è§„èŒƒ)
2. [APIå“åº”æ ¼å¼](#apiå“åº”æ ¼å¼)
3. [æ—¥å¿—è®°å½•è§„èŒƒ](#æ—¥å¿—è®°å½•è§„èŒƒ)
4. [ä»£ç æäº¤è§„èŒƒ](#ä»£ç æäº¤è§„èŒƒ)
5. [å¸¸è§é—®é¢˜è§£ç­”](#å¸¸è§é—®é¢˜è§£ç­”)

---

## å¼‚å¸¸å¤„ç†è§„èŒƒ

### åŸåˆ™

1. **ä¸è¦åå¼‚å¸¸** - ä»»ä½•æ•è·çš„å¼‚å¸¸éƒ½åº”è¯¥å¤„ç†æˆ–é‡æ–°æŠ›å‡º
2. **æ—©æœŸè¿”å›** - éªŒè¯å¤±è´¥ç«‹å³è¿”å›ï¼Œé¿å…æ·±å±‚åµŒå¥—
3. **æ˜ç¡®çš„å¼‚å¸¸ä¿¡æ¯** - ä½¿ç”¨å¸¸é‡è€Œéç¡¬ç¼–ç å­—ç¬¦ä¸²
4. **å®Œæ•´çš„å¼‚å¸¸é“¾** - ä¿ç•™åŸå§‹å¼‚å¸¸ä¿¡æ¯ç”¨äºè°ƒè¯•

### æ ‡å‡†æ¨¡æ¿

```java
@Service
@Slf4j
public class MyService {
    
    public void businessMethod(Long id, String data) {
        // 1. å‚æ•°éªŒè¯ - æ—©æœŸè¿”å›
        if (id == null || id <= 0) {
            throw new BusinessException(ErrorConstants.INVALID_PARAMETER);
        }
        
        // 2. ä¸šåŠ¡éªŒè¯ - ä¾æ¬¡æ£€æŸ¥
        Entity entity = mapper.selectById(id);
        if (entity == null) {
            throw new BusinessException(ErrorConstants.ENTITY_NOT_EXIST);
        }
        
        // 3. æƒé™éªŒè¯
        if (!canOperate(entity)) {
            throw new BusinessException(ErrorConstants.NO_PERMISSION);
        }
        
        // 4. çŠ¶æ€éªŒè¯
        if (!isValidStatus(entity.getStatus())) {
            throw new BusinessException(ErrorConstants.INVALID_STATUS);
        }
        
        // 5. æ­£å¸¸ä¸šåŠ¡é€»è¾‘
        log.info("æ‰§è¡Œæ“ä½œ: id={}, data={}", id, data);
        doSomething(entity, data);
        
        // 6. è®°å½•æˆåŠŸ
        log.info("æ“ä½œæˆåŠŸ: id={}", id);
    }
}
```

### ç¦æ­¢é¡¹

```java
// âŒ ä¸è¦è¿™æ ·åš
try {
    someOperation();
} catch (Exception e) {
    // ä»€ä¹ˆéƒ½ä¸åš - å¼‚å¸¸è¢«åæ‰äº†
}

// âŒ ä¸è¦è¿™æ ·åš
try {
    someOperation();
} catch (Exception e) {
    throw new RuntimeException(e);  // å¼‚å¸¸ç±»å‹ä¸ç»Ÿä¸€
}

// âŒ ä¸è¦è¿™æ ·åš
if (condition) throw new Exception("error");  // ç¡¬ç¼–ç å­—ç¬¦ä¸²

// âŒ ä¸è¦è¿™æ ·åš
System.out.println("å‘ç”Ÿé”™è¯¯");  // ä½¿ç”¨printlnä»£æ›¿æ—¥å¿—
```

---

## APIå“åº”æ ¼å¼

### æ ‡å‡†å“åº”æ ¼å¼

æ‰€æœ‰APIæ¥å£éƒ½éµå¾ªä»¥ä¸‹ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    // å…·ä½“æ•°æ®å†…å®¹
  }
}
```

### å“åº”ç è§„èŒƒ

| å“åº”ç  | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|
| 200 | æˆåŠŸ | `{ "code": 200, "message": "æˆåŠŸ" }` |
| 400 | ä¸šåŠ¡é”™è¯¯ | `{ "code": 400, "message": "å•†å“ä¸å­˜åœ¨" }` |
| 401 | æœªæˆæƒ | `{ "code": 401, "message": "Tokenæ— æ•ˆ" }` |
| 403 | ç¦æ­¢è®¿é—® | `{ "code": 403, "message": "æ— æ“ä½œæƒé™" }` |
| 500 | ç³»ç»Ÿé”™è¯¯ | `{ "code": 500, "message": "ç³»ç»Ÿå¼‚å¸¸" }` |

### Controllerè§„èŒƒ

```java
@RestController
@RequestMapping("/api/resource")
@Slf4j
@RequiredArgsConstructor
public class ResourceController {
    
    private final ResourceService service;
    
    // âœ… æˆåŠŸå“åº” - ä»…è¿”å›æ•°æ®
    @GetMapping("/{id}")
    public Result<ResourceDTO> getById(@PathVariable Long id) {
        log.info("æŸ¥è¯¢èµ„æº: id={}", id);
        ResourceDTO data = service.getById(id);
        return Result.success(data);
    }
    
    // âœ… æˆåŠŸå“åº” - è¿”å›æ•°æ®å’Œæç¤ºä¿¡æ¯
    @PostMapping
    public Result<Long> create(@RequestBody ResourceRequest request) {
        log.info("åˆ›å»ºèµ„æº: {}", request);
        Long id = service.create(request);
        return Result.success(id, "åˆ›å»ºæˆåŠŸ");
    }
    
    // âœ… æˆåŠŸå“åº” - æ— è¿”å›æ•°æ®
    @DeleteMapping("/{id}")
    public Result<Void> delete(@PathVariable Long id) {
        log.info("åˆ é™¤èµ„æº: id={}", id);
        service.delete(id);
        return Result.success("åˆ é™¤æˆåŠŸ");
    }
    
    // âœ… å¼‚å¸¸ä¼šè¢«GlobalExceptionHandlerè‡ªåŠ¨å¤„ç†
}
```

---

## æ—¥å¿—è®°å½•è§„èŒƒ

### æ—¥å¿—çº§åˆ«æŒ‡å—

| çº§åˆ« | ç”¨é€” | ç¤ºä¾‹ |
|------|------|------|
| DEBUG | å¼€å‘è°ƒè¯•ä¿¡æ¯ | `log.debug("å¤„ç†å‚æ•°: {}", param)` |
| INFO | å…³é”®ä¸šåŠ¡æ“ä½œ | `log.info("ç”¨æˆ·{}ç™»å½•", userId)` |
| WARN | å¯èƒ½çš„é—®é¢˜ | `log.warn("Tokenå³å°†è¿‡æœŸ")` |
| ERROR | é”™è¯¯ä¿¡æ¯ | `log.error("æ“ä½œå¤±è´¥", exception)` |

### æ—¥å¿—è®°å½•è§„èŒƒ

```java
@Slf4j
public class UserService {
    
    public void login(String username) {
        // 1. ä¸šåŠ¡å¼€å§‹
        log.info("ç”¨æˆ·ç™»å½•å¼€å§‹: username={}", username);
        
        User user = findUser(username);
        if (user == null) {
            // 2. è­¦å‘Šä¿¡æ¯
            log.warn("ç™»å½•å¤±è´¥: ç”¨æˆ·ä¸å­˜åœ¨, username={}", username);
            throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        
        // 3. å…³é”®æ­¥éª¤
        log.info("ç”¨æˆ·{}éªŒè¯æˆåŠŸ", userId);
        
        // 4. è°ƒè¯•ä¿¡æ¯
        log.debug("ç”ŸæˆToken: userId={}", userId);
        
        // 5. ä¸šåŠ¡ç»“æŸ
        log.info("ç”¨æˆ·{}ç™»å½•æˆåŠŸ", userId);
    }
    
    public void deleteUser(Long userId) {
        try {
            // æ‰§è¡Œåˆ é™¤
            log.info("åˆ é™¤ç”¨æˆ·: userId={}", userId);
            userMapper.deleteById(userId);
        } catch (Exception e) {
            // å®Œæ•´è®°å½•å¼‚å¸¸
            log.error("åˆ é™¤ç”¨æˆ·å¤±è´¥: userId={}", userId, e);
            throw new BusinessException("åˆ é™¤å¤±è´¥");
        }
    }
}
```

### ç¦æ­¢é¡¹

```java
// âŒ ä¸è¦ä½¿ç”¨println
System.out.println("ç”¨æˆ·ç™»å½•");

// âŒ ä¸è¦æ‰“å°æ•æ„Ÿä¿¡æ¯
log.info("ç”¨æˆ·å¯†ç : {}", password);

// âŒ ä¸è¦ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆæ€§èƒ½é—®é¢˜ï¼‰
log.info("ç”¨æˆ·" + username + "ç™»å½•");

// âœ… ä½¿ç”¨å ä½ç¬¦ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰
log.info("ç”¨æˆ·{}ç™»å½•", username);
```

---

## ä»£ç æäº¤è§„èŒƒ

### æäº¤å‰æ£€æŸ¥æ¸…å•

åœ¨æäº¤ä»£ç å‰ï¼Œå¿…é¡»é€šè¿‡ä»¥ä¸‹æ£€æŸ¥ï¼š

```
â–¡ æ˜¯å¦æ·»åŠ äº†é€‚å½“çš„å¼‚å¸¸å¤„ç†ï¼Ÿ
â–¡ æ˜¯å¦ä½¿ç”¨äº† ErrorConstants å¸¸é‡ï¼Ÿ
â–¡ æ˜¯å¦æ·»åŠ äº†æ—¥å¿—è®°å½•ï¼Ÿ
â–¡ æ˜¯å¦æœ‰ System.out.printlnï¼Ÿ
â–¡ æ˜¯å¦æœ‰ç¡¬ç¼–ç çš„å¼‚å¸¸å­—ç¬¦ä¸²ï¼Ÿ
â–¡ æ˜¯å¦é€šè¿‡äº†ä»£ç å®¡æŸ¥ï¼Ÿ
â–¡ æ˜¯å¦æœ¬åœ°æµ‹è¯•é€šè¿‡ï¼Ÿ
```

### æäº¤ä¿¡æ¯æ ¼å¼

```
[æ¨¡å—] åŠŸèƒ½æè¿°

è¯¦ç»†è¯´æ˜ï¼ˆå¦‚æœéœ€è¦ï¼‰

ç›¸å…³Issue: #123
```

**ç¤ºä¾‹**:
```
[product] ä¿®å¤å•†å“å‘å¸ƒå¼‚å¸¸å¤„ç†

- è¡¥å…¨æ‰€æœ‰å¼‚å¸¸éªŒè¯é€»è¾‘
- æ·»åŠ è¯¦ç»†æ—¥å¿—è®°å½•
- ä½¿ç”¨ ErrorConstants å¸¸é‡

ç›¸å…³Issue: #45
```

---

## å¸¸è§é—®é¢˜è§£ç­”

### Q1: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ BusinessExceptionï¼Ÿ

**A**: å½“å‘ç”Ÿ**é¢„æœŸå†…çš„ä¸šåŠ¡é”™è¯¯**æ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š
- ç”¨æˆ·ä¸å­˜åœ¨
- æƒé™ä¸è¶³
- çŠ¶æ€ä¸ç¬¦åˆ
- å‚æ•°æ— æ•ˆ

**ä¸è¦ç”¨äº**ç³»ç»Ÿå¼‚å¸¸æˆ–æœªé¢„æ–™çš„é”™è¯¯ã€‚

### Q2: å¦‚ä½•æ·»åŠ æ–°çš„é”™è¯¯å¸¸é‡ï¼Ÿ

**A**: 
1. åœ¨ `ErrorConstants.java` ä¸­æ·»åŠ æ–°å¸¸é‡
2. æŒ‰æ¨¡å—åˆ†ç±»æ”¾åœ¨å¯¹åº”çš„ `// ========== XXX =========` ä¸‹
3. åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨è¯¥å¸¸é‡

```java
// åœ¨ ErrorConstants.java ä¸­
public static final String MY_NEW_ERROR = "å…·ä½“é”™è¯¯ä¿¡æ¯";

// åœ¨ä¸šåŠ¡ä»£ç ä¸­
throw new BusinessException(ErrorConstants.MY_NEW_ERROR);
```

### Q3: å¦‚ä½•å¤„ç†ç¬¬ä¸‰æ–¹å¼‚å¸¸ï¼Ÿ

**A**:
```java
public void callThirdParty() {
    try {
        thirdPartyService.doSomething();
    } catch (ThirdPartyException e) {
        log.error("è°ƒç”¨ç¬¬ä¸‰æ–¹å¤±è´¥", e);
        throw new BusinessException("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

### Q4: å¼‚å¸¸ä¿¡æ¯å¯ä»¥åŒ…å«ç”¨æˆ·è¾“å…¥å—ï¼Ÿ

**A**: å¯ä»¥ï¼Œä½†è¦é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼š

```java
// âœ… å¯ä»¥
throw new BusinessException("ç”¨æˆ·å " + username + " ä¸å­˜åœ¨");

// âŒ ä¸è¦
throw new BusinessException("ç”¨æˆ·å¯†ç : " + password);

// âŒ ä¸è¦æš´éœ²ç³»ç»Ÿç»†èŠ‚
throw new BusinessException("SQLé”™è¯¯: " + sqlException.getMessage());
```

### Q5: GlobalExceptionHandler å¦‚ä½•å¤„ç†å¼‚å¸¸ï¼Ÿ

**A**: è‡ªåŠ¨å¤„ç†ï¼Œæ— éœ€åœ¨ Controller ä¸­æ•è·ï¼š

```java
// âŒ ä¸éœ€è¦è¿™æ ·
@GetMapping("/{id}")
public Result<Data> get(@PathVariable Long id) {
    try {
        return Result.success(service.get(id));
    } catch (BusinessException e) {
        return Result.fail(e.getMessage());  // ä¸éœ€è¦
    }
}

// âœ… ç›´æ¥ä½¿ç”¨ï¼Œå¼‚å¸¸ä¼šè‡ªåŠ¨å¤„ç†
@GetMapping("/{id}")
public Result<Data> get(@PathVariable Long id) {
    return Result.success(service.get(id));
}
```

### Q6: å¦‚ä½•æµ‹è¯•å¼‚å¸¸å¤„ç†ï¼Ÿ

**A**: ç¼–å†™å•å…ƒæµ‹è¯•éªŒè¯å¼‚å¸¸æŠ›å‡ºï¼š

```java
@Test
public void testProductNotFound() {
    // å‡†å¤‡
    when(productMapper.selectById(999L))
        .thenReturn(null);
    
    // æ‰§è¡Œ & éªŒè¯
    assertThrows(BusinessException.class, () -> {
        productService.getDetail(999L);
    });
}
```

---

## ğŸ“š ç›¸å…³èµ„æº

### å†…éƒ¨æ–‡æ¡£
- [å¼‚å¸¸å¤„ç†æ¡†æ¶è¯´æ˜](./å¼‚å¸¸å¤„ç†æ¡†æ¶è¯´æ˜.md)
- [å¼‚å¸¸å¤„ç†å¿«é€Ÿå‚è€ƒ](./å¼‚å¸¸å¤„ç†å¿«é€Ÿå‚è€ƒ.md)
- [åç«¯é€»è¾‘è¡¥å……æ€»ç»“](./åç«¯é€»è¾‘è¡¥å……æ€»ç»“.md)

### ä»£ç ç¤ºä¾‹
- AuthServiceImpl - è®¤è¯æœåŠ¡ç¤ºä¾‹
- UserServiceImpl - ç”¨æˆ·æœåŠ¡ç¤ºä¾‹
- ProductServiceImpl - å•†å“æœåŠ¡ç¤ºä¾‹
- OrdersServiceImpl - è®¢å•æœåŠ¡ç¤ºä¾‹

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥é˜…ç›¸å…³æ–‡æ¡£
2. æŸ¥çœ‹ä»£ç ç¤ºä¾‹
3. å’¨è¯¢å›¢é˜Ÿä¸»ç®¡

---

**ç‰ˆæœ¬**: v1.0  
**ç»´æŠ¤è€…**: ä»£ç è´¨é‡å°ç»„  
**æœ€åæ›´æ–°**: 2026-01-20  
**çŠ¶æ€**: âœ… ç”Ÿæ•ˆ
