## 📋 系统概述

一个基于Spring Boot + Vue的闲置物品交易平台，支持用户发布、浏览、购买二手商品，包含完整的用户体系和交易流程。

------

## 1. 普通用户功能（核心业务）

### （1）用户与账号模块

| 功能             | 描述                     | 实现要点                    |
| :--------------- | :----------------------- | :-------------------------- |
| **用户注册**     | 支持手机号/邮箱注册      | 验证码验证、密码加密存储    |
| **用户登录**     | JWT鉴权登录              | Token刷新机制、登录状态保持 |
| **退出登录**     | 安全退出系统             | Token失效、清除本地存储     |
| **修改个人信息** | 更新昵称、头像、联系方式 | 头像上传到OSS、表单验证     |
| **修改密码**     | 通过原密码修改新密码     | 原密码验证、密码强度校验    |
| **上传头像**     |                          |                             |

### （2）商品管理模块（卖家侧）

| 功能              | 描述                           | 字段/状态               |
| :---------------- | :----------------------------- | :---------------------- |
| **发布闲置商品**  | 创建新的商品信息               | -                       |
| - 商品标题        | 商品名称                       | 必填，长度限制          |
| - 商品描述        | 新旧程度选项，详细描述（补充） | 富文本/纯文本           |
| - 商品图片        | 商品描述图                     | 支持多图上传            |
| - 商品价格        | 交易价格                       | 浮点数，两位小数        |
| - 商品分类        | 所属分类                       | 关联分类表              |
|                   |                                |                         |
| - 商品标签        | 搜索关键词                     | 多标签，逗号分隔        |
|                   |                                |                         |
| **修改商品信息**  | 编辑已发布商品                 | 审核中/已上架商品可修改 |
| **上架/下架商品** | 控制商品可见性                 | 状态：上架/下架         |
| **删除商品**      | 逻辑删除商品                   | is_deleted标志位        |
| **查看我的商品**  | 卖家商品列表                   | 分页显示                |
| **查看商品数据**  | 浏览量和收藏量统计             | 实时更新                |

### （3）商品浏览与搜索模块（买家侧）

| 功能             | 描述           | 技术实现                  |
| :--------------- | :------------- | :------------------------ |
| **商品列表展示** | 首页商品瀑布流 | 分页加载（PageHelper）    |
| **按分类浏览**   | 分类筛选商品   | 分类树形结构              |
| **关键词搜索**   | 全文检索商品   | Elasticsearch或数据库LIKE |
| **排序功能**     | 多种排序方式   | 价格(升/降)、时间(新/旧)  |
| **商品详情页**   | 商品详细信息   | 包括卖家信息、评价        |
| **卖家信息查看** | 查看卖家信用等 | 关联用户表信息            |

### （4）购物车模块

| 功能                 | 描述             | 业务逻辑           |
| :------------------- | :--------------- | :----------------- |
| **添加商品到购物车** | 将商品加入购物车 | 校验库存/状态      |
| **修改商品数量**     | 调整购买数量     | 最小1，最大库存    |
| **删除购物车商品**   | 移除购物车项     | 物理删除或逻辑删除 |
| **查看购物车列表**   | 当前用户的购物车 | 合并同一商品       |

### （5）订单管理模块（交易核心）

| 功能             | 描述                       | 状态流转             |
| :--------------- | :------------------------- | :------------------- |
| **创建订单**     | 从购物车或直接购买生成订单 | 生成订单号、计算总价 |
| **订单支付**     | 模拟支付流程               | 调用支付接口（模拟） |
| **买家订单列表** | 买家查看所有订单           | 按状态筛选           |
| **卖家订单列表** | 卖家查看卖出订单           | 按状态筛选           |
| **取消订单**     | 买家/卖家取消订单          | 待支付、待发货可取消 |
| **确认收货**     | 买家确认收到商品           | 触发完成状态         |
| **订单状态流转** | 完整交易流程               | 见下方状态图         |

#### 订单状态流程图

text

```
待支付 (UNPAID)
    ↓ [支付成功]
已支付 (PAID)
    ↓ [卖家发货]
已发货 (SHIPPED)
    ↓ [买家确认收货]
已完成 (COMPLETED)
    ↓ [评价后]
已评价 (REVIEWED)
    
    ↓ [取消路径]
已取消 (CANCELLED)
```



### （6）评价与反馈模块

| 功能             | 描述                 | 评分体系       |
| :--------------- | :------------------- | :------------- |
| **订单评价**     | 买家对已完成订单评价 | 仅可评价一次   |
| - 评分           | 1~5星评分            | 必选，整数     |
| - 文字评价       | 详细评价内容         | 可选，字数限制 |
| **查看商品评价** | 商品详情页展示评价   | 分页显示       |
| **评价统计**     | 商品平均分、评价数   | 实时计算       |

### （7）收藏与关注模块

| 功能             | 描述                       | 数据结构        |
| :--------------- | :------------------------- | :-------------- |
| **收藏商品**     | 添加商品到收藏夹           | 用户-商品关联表 |
| **取消收藏**     | 移除收藏的商品             | 删除关联记录    |
| **我的收藏列表** | 查看所有收藏商品           | 分页显示        |
| **关注卖家**     | 关注感兴趣卖家（可选扩展） | 用户-用户关联表 |

------

## 2. 管理员功能模块

### （1）用户管理

| 功能              | 描述                  | 权限控制     |
| :---------------- | :-------------------- | :----------- |
| **查看用户列表**  | 所有注册用户信息      | 分页+搜索    |
| **封禁/解封用户** | 禁用违规用户账号      | 更新用户状态 |
| **重置用户密码**  | 管理员重置密码        | 生成临时密码 |
| **查看用户详情**  | 用户详细信息+操作日志 | 关联查询     |

### （2）商品管理

| 功能             | 描述                   | 审核机制                 |
| :--------------- | :--------------------- | :----------------------- |
| **查看全部商品** | 平台所有商品列表       | 高级筛选条件             |
| **商品审核**     | 审核新发布商品（可选） | 审核状态：待审/通过/拒绝 |
| **强制下架商品** | 下架违规商品           | 下架原因记录             |
| **商品统计分析** | 商品发布趋势等         | 图表展示                 |

### （3）订单管理

| 功能             | 描述                     | 数据维度     |
| :--------------- | :----------------------- | :----------- |
| **查看平台订单** | 所有交易订单             | 多种筛选条件 |
| **交易数据统计** | 平台交易数据看板         | 日/月/年统计 |
| - 订单总数       | 累计订单数量             | -            |
| - 交易总额       | 平台GMV统计              | -            |
| - 退款率         | 退款订单比例             | -            |
| **异常订单处理** | 处理纠纷订单（可选扩展） | 人工介入     |

### （4）分类与标签管理

| 功能             | 描述             | 操作限制           |
| :--------------- | :--------------- | :----------------- |
| **新增商品分类** | 添加新分类       | 分类名唯一校验     |
| **修改商品分类** | 编辑分类信息     | 已使用分类不可删除 |
| **删除商品分类** | 移除分类         | 检查关联商品       |
| **分类排序**     | 调整分类显示顺序 | 拖拽排序或序号     |

------

## 🏗️ 技术架构

### 后端技术栈

- **框架**: Spring Boot 3.5.9+
- **安全**: Spring Security + JWT
- **数据库**: MySQL 8.0 
- **ORM**: MyBatis-Plus
- **文件存储**: 阿里云OSS

### 前端技术栈

- **框架**: Vue 3 + TypeScript
- **UI库**: Element Plus
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **HTTP客户端**: Axios

### 数据库设计要点


```
-- 核心表示例
用户表 (users)
商品表 (products)
分类表 (categories)
订单表 (orders)
订单项表 (order_items)
购物车表 (cart_items)
收藏表 (favorites)
评价表 (reviews)
```

## 1. 用户表 `user`

```
CREATE TABLE user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',
    username VARCHAR(20) NOT NULL COMMENT '用户名',
    password VARCHAR(255) NOT NULL COMMENT '加密后的密码',
    nickname VARCHAR(50) NOT NULL COMMENT '用户昵称',
    phone VARCHAR(20) COMMENT '手机号',
    email VARCHAR(100) COMMENT '邮箱',
    avatar VARCHAR(255) COMMENT '头像URL',
    status TINYINT DEFAULT 1 COMMENT '账号状态：1正常 0封禁',
    role TINYINT DEFAULT 0 COMMENT '角色：0普通用户 1管理员',
    is_deleted TINYINT DEFAULT 0 COMMENT '逻辑删除：0否 1是',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    UNIQUE KEY uk_username (username),
    UNIQUE KEY uk_phone (phone),
    UNIQUE KEY uk_email (email)
) COMMENT='用户表';
```

## 2. 商品分类表 `category`

```
CREATE TABLE category (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '分类ID',
    name VARCHAR(50) NOT NULL COMMENT '分类名称',
    parent_id BIGINT DEFAULT NULL COMMENT '父分类ID，NULL表示一级分类',
    level INT NOT NULL COMMENT '分类层级，从1开始',
    path VARCHAR(255) COMMENT '分类路径，如 1/3/8',
    status TINYINT DEFAULT 1 COMMENT '状态：1启用 0禁用',
    create_time DATETIME COMMENT '创建时间',
    UNIQUE KEY uk_parent_name (parent_id, name)
) COMMENT='商品分类表';


## 3. 商品表 `product`

```
CREATE TABLE product (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '商品ID',
    user_id BIGINT NOT NULL COMMENT '发布者ID',
    category_id BIGINT NOT NULL COMMENT '分类ID',
    title VARCHAR(100) NOT NULL COMMENT '商品标题',
    description TEXT COMMENT '商品描述',
    price DECIMAL(10,2) NOT NULL COMMENT '商品价格',
    quantity INT DEFAULT 1 COMMENT '商品数量',
    condition_level TINYINT NOT NULL COMMENT '新旧程度：1全新 2几乎全新 3轻微使用 4明显使用',
    negotiable TINYINT DEFAULT 1 COMMENT '是否可议价：1是 0否',
    product_status TINYINT DEFAULT 1 COMMENT '状态：1待审核 2上架 3下架 4已售',
    is_deleted TINYINT DEFAULT 0 COMMENT '逻辑删除：0否 1是',
    view_count INT DEFAULT 0 COMMENT '浏览量',
    create_time DATETIME COMMENT '创建时间',
    update_time DATETIME COMMENT '更新时间',
    KEY idx_user (user_id),
    KEY idx_category (category_id),
    KEY idx_status (product_status)
) COMMENT='商品表';
```



## 4. 商品图片表 `product_image`

```
CREATE TABLE product_image (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '图片ID',
    product_id BIGINT NOT NULL COMMENT '商品ID',
    image_url VARCHAR(255) NOT NULL COMMENT '图片URL',
    is_main TINYINT DEFAULT 0 COMMENT '是否主图：1是 0否',
    sort INT DEFAULT 0 COMMENT '排序值，越小越靠前',
    create_time DATETIME COMMENT '创建时间',
    KEY idx_product (product_id)
) COMMENT='商品图片表';

```

## 5. 购物车表 `cart`

```
CREATE TABLE cart (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '购物车ID',
    user_id BIGINT NOT NULL COMMENT '用户ID',
    product_id BIGINT NOT NULL COMMENT '商品ID',
    quantity INT DEFAULT 1 COMMENT '商品数量',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    UNIQUE KEY uk_user_product (user_id, product_id),
    KEY idx_user (user_id)
) COMMENT='购物车表';

```

## 6. 订单表 `orders`

```
CREATE TABLE orders (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '订单ID',
    order_no VARCHAR(50) NOT NULL COMMENT '订单编号',
    buyer_id BIGINT NOT NULL COMMENT '买家ID',
    seller_id BIGINT NOT NULL COMMENT '卖家ID',
    total_price DECIMAL(10,2) NOT NULL COMMENT '订单总价',
    order_status TINYINT DEFAULT 1 COMMENT '订单状态：1待支付 2已支付 3已完成 4已取消',
    is_deleted TINYINT DEFAULT 0 COMMENT '逻辑删除：0否 1是',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    UNIQUE KEY uk_order_no (order_no),
    KEY idx_buyer (buyer_id),
    KEY idx_seller (seller_id)
) COMMENT='订单表';

```

## 7. 订单明细表 `order_item`

```
CREATE TABLE order_item (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '明细ID',
    order_id BIGINT NOT NULL COMMENT '订单ID',
    product_id BIGINT NOT NULL COMMENT '商品ID',
    product_title VARCHAR(100) NOT NULL COMMENT '商品标题（下单时快照）',
    price DECIMAL(10,2) NOT NULL COMMENT '成交单价',
    quantity INT NOT NULL COMMENT '购买数量',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    KEY idx_order (order_id)
) COMMENT='订单明细表';

```

## 8. 商品评价表 `comment`

```
CREATE TABLE comment (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '评价ID',
    user_id BIGINT NOT NULL COMMENT '评价用户ID',
    product_id BIGINT NOT NULL COMMENT '商品ID',
    order_id BIGINT NOT NULL COMMENT '订单ID',
    score TINYINT NOT NULL COMMENT '评分：1-5',
    content VARCHAR(255) COMMENT '评价内容',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    UNIQUE KEY uk_order (order_id),
    KEY idx_product (product_id)
) COMMENT='商品评价表';

```

## 9. 收藏表 `favorite`

```
CREATE TABLE favorite (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '收藏ID',
    user_id BIGINT NOT NULL COMMENT '用户ID',
    product_id BIGINT NOT NULL COMMENT '商品ID',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    UNIQUE KEY uk_user_product (user_id, product_id),
    KEY idx_user (user_id)
) COMMENT='商品收藏表';

```

------

## 📊 扩展功能

# 📷 图像识别辅助功能

## 功能概述

- 用户上传商品图片时，系统自动识别商品类别、推荐标签、标题和参考价格

------

## 技术实现方案

### 1. 模型选择

- **ResNet 系列（ResNet-34）**
  - 通过残差连接解决深层网络训练难题
  - 提取低层边缘、纹理特征及高层语义特征
  - 支持迁移学习和微调，适合有限商品图片数据
  - 推理速度快，计算资源占用低

### 2. 数据准备与训练

- 数据来源：平台历史商品图片 + 开源闲置商品数据集
- 数据增强：旋转、翻转、缩放、裁剪，提高模型鲁棒性
- 类别映射：识别结果映射到平台标准商品类别，生成推荐标签

### 3. 系统流程

```
flowchart LR
    A[用户上传商品图片] --> B[图像识别模块]
    B --> C[类别识别]
    C --> D[标签生成模块]
    C --> E[标题与价格推荐模块]
    D --> F[用户确认信息]
    E --> F
    F --> G[信息提交至数据库]
```

- 图像识别模块提取商品类别
- 标签生成模块生成系统标准标签
- 推荐模块结合历史数据生成标题和参考价格
- 用户确认后提交信息完成商品上传





1. **消息通知系统**
   - 订单状态变更通知
   - 系统公告推送
   - 聊天功能（买家卖家沟通）
2. **推荐系统**
   - 基于用户行为的商品推荐
   - 协同过滤算法
3. **信用体系**
   - 用户信用评分
   - 交易履约记录
4. **数据可视化**
   - 卖家数据看板
   - 平台运营数据报表

------



### 第一阶段（基础功能）

- 用户注册登录
- 商品发布浏览
- 购物车功能

### 第二阶段（核心交易）

- 订单流程
- 支付模拟
- 评价系统

### 第三阶段（管理功能）

- 后台管理界面
- 数据统计
- 系统配置

### 第四阶段（优化扩展）

- 性能优化
- 推荐算法
- 移动端适配

